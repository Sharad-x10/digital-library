{% extends "base.html" %}

{% block title %}Edit Book - Digital Library{% endblock %}

{% block content %}
<section class="py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="form-container fade-in">
                    <div class="text-center mb-4">
                        <div class="icon-circle mx-auto mb-3" style="background: var(--gradient-info);">
                            <i class="fas fa-edit"></i>
                        </div>
                        <h2 class="gradient-text">Edit Book</h2>
                        <p class="text-muted">Update book information</p>
                    </div>
                    
                    <form method="POST" action="{{ url_for('edit_book', book_id=book.id) }}" id="bookForm">
                        {{ form.hidden_tag() }}
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="title" class="form-label">
                                    <i class="fas fa-heading"></i> Book Title *
                                </label>
                                {{ form.title(class="form-control", id="title") }}
                                {% if form.title.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.title.errors %}{{ error }}{% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="author" class="form-label">
                                    <i class="fas fa-user-edit"></i> Author *
                                </label>
                                {{ form.author(class="form-control", id="author") }}
                                {% if form.author.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.author.errors %}{{ error }}{% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="isbn" class="form-label">
                                    <i class="fas fa-barcode"></i> ISBN *
                                </label>
                                {{ form.isbn(class="form-control", id="isbn") }}
                                {% if form.isbn.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.isbn.errors %}{{ error }}{% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="category" class="form-label">
                                    <i class="fas fa-tags"></i> Category *
                                </label>
                                {{ form.category(class="form-select", id="category") }}
                                {% if form.category.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.category.errors %}{{ error }}{% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="quantity" class="form-label">
                                    <i class="fas fa-layer-group"></i> Total Quantity *
                                </label>
                                {{ form.quantity(class="form-control", id="quantity") }}
                                {% if form.quantity.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.quantity.errors %}{{ error }}{% endfor %}
                                    </div>
                                {% endif %}
                                <small class="text-muted">Currently available: {{ book.available_quantity }}</small>
                            </div>
                            
                            <div class="col-md-6 mb-3">
                                <label for="publication_year" class="form-label">
                                    <i class="fas fa-calendar"></i> Publication Year
                                </label>
                                {{ form.publication_year(class="form-control", id="publication_year") }}
                                {% if form.publication_year.errors %}
                                    <div class="text-danger small mt-1">
                                        {% for error in form.publication_year.errors %}{{ error }}{% endfor %}
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label for="description" class="form-label">
                                <i class="fas fa-align-left"></i> Description
                            </label>
                            {{ form.description(class="form-control", id="description", rows="4") }}
                            {% if form.description.errors %}
                                <div class="text-danger small mt-1">
                                    {% for error in form.description.errors %}{{ error }}{% endfor %}
                                </div>
                            {% endif %}
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                {{ form.submit(class="btn btn-gradient-info btn-lg w-100") }}
                            </div>
                            <div class="col-md-6">
                                <a href="{{ url_for('manage_books') }}" class="btn btn-outline-secondary btn-lg w-100">
                                    <i class="fas fa-times"></i> Cancel
                                </a>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
